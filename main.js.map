{"version":3,"file":"main.js","sources":["src/previewView.ts","src/settings.ts","src/main.ts"],"sourcesContent":["import { ItemView, WorkspaceLeaf } from 'obsidian';\n\nexport const PREVIEW_VIEW_TYPE = 'remotion-preview-view';\n\nexport class PreviewView extends ItemView {\n    private iframe: HTMLIFrameElement | null = null;\n\n    constructor(leaf: WorkspaceLeaf) {\n        super(leaf);\n        this.icon = 'video';\n    }\n\n    getViewType(): string {\n        return PREVIEW_VIEW_TYPE;\n    }\n\n    getDisplayText(): string {\n        return 'Remotion Preview';\n    }\n\n    async onOpen() {\n        const container = this.containerEl.children[1] as HTMLElement;\n        container.empty();\n        container.addClass('remotion-preview-container');\n\n        // Create iframe for Remotion runtime\n        this.iframe = container.createEl('iframe', {\n            cls: 'remotion-preview-iframe',\n        });\n        this.iframe.style.width = '100%';\n        this.iframe.style.height = '100%';\n        this.iframe.style.border = 'none';\n        this.iframe.style.backgroundColor = '#000';\n\n        // TODO: Initialize iframe with Remotion runtime\n        this.iframe.srcdoc = `\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset=\"utf-8\">\n                <style>\n                    body { \n                        margin: 0; \n                        padding: 20px;\n                        font-family: system-ui;\n                        background: #1a1a1a;\n                        color: #fff;\n                    }\n                </style>\n            </head>\n            <body>\n                <h2>Remotion Preview</h2>\n                <p>Preview panel initialized. Awaiting scene compilation...</p>\n            </body>\n            </html>\n        `;\n    }\n\n    async onClose() {\n        this.iframe = null;\n    }\n}\n","import { App, PluginSettingTab, Setting } from 'obsidian';\n\nexport interface PluginSettings {\n    defaultFps: number;\n    defaultWidth: number;\n    defaultHeight: number;\n}\n\nexport const DEFAULT_SETTINGS: PluginSettings = {\n    defaultFps: 30,\n    defaultWidth: 1920,\n    defaultHeight: 1080,\n};\n\nexport class RemotionSettingTab extends PluginSettingTab {\n    plugin: any;\n\n    constructor(app: App, plugin: any) {\n        super(app, plugin);\n        this.plugin = plugin;\n    }\n\n    display(): void {\n        const { containerEl } = this;\n\n        containerEl.empty();\n        containerEl.createEl('h2', { text: 'Remotion Preview Settings' });\n\n        new Setting(containerEl)\n            .setName('Default FPS')\n            .setDesc('Default frames per second for Remotion compositions.')\n            .addText(text => text\n                .setValue(String(this.plugin.settings.defaultFps))\n                .onChange(async (value) => {\n                    const fps = parseInt(value);\n                    if (!isNaN(fps) && fps > 0) {\n                        this.plugin.settings.defaultFps = fps;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('Default Width')\n            .setDesc('Default composition width in pixels.')\n            .addText(text => text\n                .setValue(String(this.plugin.settings.defaultWidth))\n                .onChange(async (value) => {\n                    const width = parseInt(value);\n                    if (!isNaN(width) && width > 0) {\n                        this.plugin.settings.defaultWidth = width;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('Default Height')\n            .setDesc('Default composition height in pixels.')\n            .addText(text => text\n                .setValue(String(this.plugin.settings.defaultHeight))\n                .onChange(async (value) => {\n                    const height = parseInt(value);\n                    if (!isNaN(height) && height > 0) {\n                        this.plugin.settings.defaultHeight = height;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n    }\n}\n","import { Plugin, WorkspaceLeaf } from 'obsidian';\nimport { PreviewView, PREVIEW_VIEW_TYPE } from './previewView';\nimport { PluginSettings, DEFAULT_SETTINGS, RemotionSettingTab } from './settings';\n\nexport default class RemotionPlugin extends Plugin {\n    public settings!: PluginSettings;\n\n    async onload() {\n        await this.loadSettings();\n\n        // Register the Remotion preview view\n        this.registerView(PREVIEW_VIEW_TYPE, (leaf: WorkspaceLeaf) => new PreviewView(leaf));\n\n        this.addRibbonIcon('video', 'Open Remotion Preview', async () => {\n            await this.activateView();\n        });\n\n        // Add settings tab\n        this.addSettingTab(new RemotionSettingTab(this.app, this));\n\n        console.log('Remotion plugin loaded');\n    }\n\n    async loadSettings() {\n        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\n    }\n\n    async saveSettings() {\n        await this.saveData(this.settings);\n    }\n\n    async activateView() {\n        const existing = this.app.workspace.getLeavesOfType(PREVIEW_VIEW_TYPE)[0];\n        \n        if (existing) {\n            this.app.workspace.revealLeaf(existing);\n            return;\n        }\n\n        const leaf = this.app.workspace.getLeaf('split', 'vertical');\n        await leaf.setViewState({\n            type: PREVIEW_VIEW_TYPE,\n            active: false,\n        });\n        this.app.workspace.revealLeaf(leaf);\n    }\n\n    async onunload() {\n        this.app.workspace.detachLeavesOfType(PREVIEW_VIEW_TYPE);\n    }\n}\n"],"names":["PREVIEW_VIEW_TYPE","PreviewView","ItemView","constructor","leaf","super","this","iframe","icon","getViewType","getDisplayText","onOpen","container","containerEl","children","empty","addClass","createEl","cls","style","width","height","border","backgroundColor","srcdoc","onClose","DEFAULT_SETTINGS","defaultFps","defaultWidth","defaultHeight","RemotionSettingTab","PluginSettingTab","app","plugin","display","text","Setting","setName","setDesc","addText","setValue","String","settings","onChange","value","__awaiter","fps","parseInt","isNaN","saveSettings","RemotionPlugin","Plugin","onload","loadSettings","registerView","addRibbonIcon","activateView","addSettingTab","console","log","Object","assign","loadData","saveData","existing","workspace","getLeavesOfType","revealLeaf","getLeaf","setViewState","type","active","onunload","detachLeavesOfType"],"mappings":"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"}